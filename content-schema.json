{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/LegendaryMediaTV/EGP-Graphai/content-schema.json",
  "title": "EGP Graphai â€¢ Content Schema",
  "description": "Flexible schema for multilingual or structured text content, supporting simple strings, structured objects, and arrays for multiple content entries.",
  "oneOf": [
    {
      "type": "string",
      "minLength": 1,
      "description": "Plain text."
    },
    {
      "type": "object",
      "description": "Structured content object for plain text.",
      "properties": {
        "text": {
          "type": "string",
          "description": "Plain text."
        },
        "script": {
          "type": "string",
          "enum": ["G", "H"],
          "description": "Specifies the script of the text. If not specified, Latin script is assumed."
        },
        "marks": {
          "type": "array",
          "items": { "type": "string", "enum": ["i", "b", "woc", "sc"] },
          "uniqueItems": true,
          "description": "Formatting marks: i = italic, b = bold, woc = words of Christ (red lettering), sc = small caps"
        },
        "foot": {
          "type": "object",
          "description": "Optional footnote attached to the text.",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["stu", "trn", "var", "map", "xrf"],
              "default": "stu",
              "description": "Kind of footnote: stu (study, default), trn (translation), var (textual criticism variant), map (map), xrf (cross-reference)."
            },
            "content": {
              "$ref": "#",
              "description": "Any valid content type (i.e., string, object, or array)."
            }
          },
          "required": ["content"],
          "additionalProperties": false
        },
        "strong": {
          "type": "string",
          "pattern": "^[GH][0-9]{1,4}$",
          "description": "Strong's number."
        },
        "lemma": {
          "type": "string",
          "description": "Lexical lemma in original script."
        },
        "morph": {
          "type": "string",
          "description": "Morphological code (i.e., Robinson or Packard format)."
        },
        "paragraph": {
          "type": "boolean",
          "default": false,
          "description": "Indicates this text is the start of a new paragraph."
        },
        "break": {
          "type": "boolean",
          "default": false,
          "description": "Indicates this text ends with a line break."
        }
      },
      "minProperties": 1,
      "additionalProperties": false
    },
    {
      "type": "object",
      "description": "Structured content object for nested content with shared properties (e.g., Strong's number applying to multiple text elements).",
      "properties": {
        "content": {
          "$ref": "#",
          "description": "Nested content array or element."
        },
        "strong": {
          "type": "string",
          "pattern": "^[GH][0-9]{1,4}$",
          "description": "Strong's number applying to the entire nested content."
        },
        "lemma": {
          "type": "string",
          "description": "Lexical lemma in original script."
        },
        "morph": {
          "type": "string",
          "description": "Morphological code (i.e., Robinson or Packard format)."
        },
        "foot": {
          "type": "object",
          "description": "Optional footnote attached to the nested content.",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["stu", "trn", "var", "map", "xrf"],
              "default": "stu",
              "description": "Kind of footnote: stu (study, default), trn (translation), var (textual criticism variant), map (map), xrf (cross-reference)."
            },
            "content": {
              "$ref": "#",
              "description": "Any valid content type (i.e., string, object, or array)."
            }
          },
          "required": ["content"],
          "additionalProperties": false
        },
        "paragraph": {
          "type": "boolean",
          "default": false,
          "description": "Indicates this content is the start of a new paragraph."
        },
        "break": {
          "type": "boolean",
          "default": false,
          "description": "Indicates this content ends with a line break."
        }
      },
      "required": ["content"],
      "additionalProperties": false
    },
    {
      "type": "object",
      "description": "Structured content object for headings.",
      "properties": {
        "heading": {
          "$ref": "#",
          "description": "Any valid content type (i.e., string, object, or array)."
        }
      },
      "required": ["heading"],
      "additionalProperties": false
    },
    {
      "type": "object",
      "description": "Structured content object for paragraphs.",
      "properties": {
        "paragraph": {
          "$ref": "#",
          "description": "Any valid content type (i.e., string, object, or array)."
        }
      },
      "required": ["paragraph"],
      "additionalProperties": false
    },
    {
      "type": "object",
      "description": "Structured content object for subtitles.",
      "properties": {
        "subtitle": {
          "$ref": "#",
          "description": "Any valid content type (i.e., string, object, or array)."
        }
      },
      "required": ["subtitle"],
      "additionalProperties": false
    },
    {
      "type": "array",
      "description": "Array of content entries, allowing for multiple text elements or nested structures.",
      "items": { "$ref": "#" },
      "minItems": 1
    }
  ]
}
